<!DOCTYPE html>
<html>
<head>
    <title><%= title %></title>
    <link href="https://cdn.bootcss.com/bootstrap/3.0.1/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<!--<form class="form-horizontal" method="post" action="/login">-->
<form class="form-horizontal">
    <div class="row">
        <h2 class="col-sm-5 text-center">用户登陆</h2>
    </div>
    <p style="color: #f00;" class="errMsg"></p>
    <div class="form-group">
        <label for="inputEmail3" class="col-sm-1 control-label">用户名:</label>
        <div class="col-sm-3 ">
            <input type="text" class="form-control"  name="username" id="inputEmail3" placeholder="用户名">
        </div>
    </div>
    <div class="form-group">
        <label for="inputEmail3" class="col-sm-1 control-label">密码:</label>
        <div class="col-sm-3 ">
            <input type="text" class="form-control"  name="password" id="" placeholder="密码：">
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" class="btn btn-sm btn-default">Sign in</button>
            <a href="/register" class="btn btn-sm btn-default">注册</a>
        </div>
    </div>
</form>

<script src="https://cdn.bootcss.com/jquery/1.11.3/jquery.js"></script>
<script>
    $("[type='submit']").click(function(e){
        e.preventDefault();
        var a = $('.form-horizontal').serializeArray();
        var params = {};
        a.map(function(ele,i){
            params[ele.name] = ele.value;
        });
        $.ajax({
            url:"http://localhost:3000/admin/login",
            xhrFields: {
                withCredentials: true
            },
            type:'post',
            data:params,
            success:function(data){
                debugger;
                if(data.success == "true"){
                    window.location.href = 'home.html';
                }else{
                    $(".errMsg").html( data.err );
                }
            },
            error:function(){

            }
        })

    })

</script>
</body>
</html>